package com.xmy.blog.service;import com.xmy.blog.NotFounfExcetion;import com.xmy.blog.dao.TypeRepository;import com.xmy.blog.po.Type;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.domain.Page;import org.springframework.data.domain.Pageable;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;/** * @author xmy * @date 2021/3/15 2:06 下午 */@Servicepublic class TypeServiceImpl implements TypeService{    @Autowired    private TypeRepository typeRepository;    //将这些操作放在事务中    @Transactional    @Override    public Type saveType(Type type) {        return typeRepository.save(type);    }    @Transactional    @Override    //这里可能存在问题    public Type getType(Long id) {//        return typeRepository.findById(id).get();        return typeRepository.getOne(id);    }    @Transactional    @Override    public Page<Type> listType(Pageable pageable) {        return typeRepository.findAll(pageable);    }    @Transactional    @Override    public Type updateType(Long id, Type type) {//        Type t = typeRepository.findById(id).get();        Type t = typeRepository.getOne(id);        if (t == null) {            throw new NotFounfExcetion("不存在该类型");        }        BeanUtils.copyProperties(type,t);        return typeRepository.save(t);    }    @Transactional    @Override    public void deleteType(Long id) {        typeRepository.deleteById(id);    }}