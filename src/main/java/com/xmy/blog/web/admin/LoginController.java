package com.xmy.blog.web.admin;import com.xmy.blog.po.User;import com.xmy.blog.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.servlet.mvc.support.RedirectAttributes;import javax.servlet.http.HttpSession;/** * @author xmy * @date 2021/3/9 11:39 下午 */@Controller@RequestMapping("/admin")public class LoginController {    @Autowired    private UserService userService;    @GetMapping()    public String loginPage() {        return "admin/login";    }    @PostMapping("/login")    //将用户信息放入session中，传过去 重定向传过去的参数，使用RedirectAttributes来接受 重定向不能使用model    public String login(@RequestParam String username, @RequestParam String password, HttpSession session, RedirectAttributes attributes) {        User user = userService.userCheck(username,password);        if (user != null) {            //不要将密码传过去，很不安全            user.setPassword(null);            session.setAttribute("user",user);            //登陆成功，返回的是登陆后的首页            return "admin/index";        } else {            //给前端界面一个提示            attributes.addFlashAttribute("message","用户名和密码错误");            //不要直接返回admin/login，使用重定向的方法  后面自己尝试一下            return "redirect:/admin";        }    }    @GetMapping("/loginout")    public String loginout(HttpSession session) {        session.removeAttribute("user");        return "redirect:/admin";    }}